{% extends "base.html" %}

{% block content %}
<div class="container">
    <!-- Filter Bar -->
    <div class="filter-bar">
        <button class="filter-btn active" data-filter="all">All</button>
        <button class="filter-btn" data-filter="plants">Plants</button>
        <button class="filter-btn" data-filter="animals">Animals</button>
        <button class="filter-btn" data-filter="objects">Objects</button>
        <button class="filter-btn" data-filter="garden_styles">Garden Styles</button>
    </div>
    
    <!-- Scattered Grid Container -->
    <div class="scattered-grid" id="scatteredGrid">
        {% for item in items %}
        <a href="/item/{{ item.category }}/{{ item.id }}" 
           class="scattered-item {% if not item.image %}text-only{% endif %}" 
           data-category="{{ item.category }}"
           data-display-category="{{ item.display_category }}">
            {% if item.image %}
            <div class="scattered-item-image">
                <img src="/images/{{ item.image }}" 
                     alt="{{ item.popular_name_english }}"
                     width="280"
                     height="280"
                     loading="lazy"
                     onerror="this.parentElement.parentElement.classList.add('text-only'); this.parentElement.remove();">
            </div>
            <div class="scattered-item-overlay">
                <h3 class="scattered-item-title">{{ item.popular_name_english }}</h3>
                {% if item.popular_name_japanese %}
                <p class="scattered-item-subtitle">{{ item.popular_name_japanese }}</p>
                {% endif %}
            </div>
            {% else %}
            <div class="scattered-item-text">
                <h3 class="scattered-item-title">{{ item.popular_name_english }}</h3>
                {% if item.popular_name_japanese %}
                <p class="scattered-item-subtitle">{{ item.popular_name_japanese }}</p>
                {% endif %}
            </div>
            {% endif %}
        </a>
        {% endfor %}
    </div>
</div>
{% endblock %}

{% block extra_scripts %}
<script>
    // Initialize scattered layout and filters when DOM is ready
    document.addEventListener('DOMContentLoaded', function() {
        console.log('Initializing scattered layout...');
        initScatteredLayout();
        initFilters();
    });
</script>
{% endblock %}
